(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{104:function(e,t,a){},124:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),l=a.n(c),s=(a(95),a(25)),o=a.n(s),u=a(32),i=a(12),m=a(168),p=a(166),d=a(167),f=a(150),E=a(75),b=(a(97),E.a.initializeApp({apiKey:"AIzaSyDEy2xKyGAC0EwgriuaT_Bm3q0Gh9jvQDQ",authDomain:"challenge-development.firebaseapp.com",databaseURL:"https://challenge-development.firebaseio.com",projectId:"challenge-development",storageBucket:"challenge-development.appspot.com",messagingSenderId:"1082045758469",appId:"1:1082045758469:web:5f1a963aeb4061cb12306c"})),g=b.auth(),h=r.a.createContext();function v(){return Object(n.useContext)(h)}function O(e){var t=e.children,a=Object(n.useState)(),c=Object(i.a)(a,2),l=c[0],s=c[1],o=Object(n.useState)(!0),u=Object(i.a)(o,2),m=u[0],p=u[1];Object(n.useEffect)((function(){return g.onAuthStateChanged((function(e){s(e),p(!1)}))}),[]);var d={currentUser:l,login:function(e,t){return g.signInWithEmailAndPassword(e,t)},signup:function(e,t){return g.createUserWithEmailAndPassword(e,t)},logout:function(){return g.signOut()},resetPassword:function(e){return g.sendPasswordResetEmail(e)},updateEmail:function(e){return l.updateEmail(e)},updatePassword:function(e){return l.updatePassword(e)}};return r.a.createElement(h.Provider,{value:d},!m&&t)}var j=a(14),w=a(18);function y(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useRef)(),c=v().signup,l=Object(n.useState)(""),s=Object(i.a)(l,2),E=s[0],b=s[1],g=Object(n.useState)(!1),h=Object(i.a)(g,2),O=h[0],y=h[1],x=Object(j.g)();function P(){return(P=Object(u.a)(o.a.mark((function n(r){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),t.current.value===a.current.value){n.next=3;break}return n.abrupt("return",b("Passwords do not match"));case 3:return n.prev=3,b(""),y(!0),n.next=8,c(e.current.value,t.current.value);case 8:x.push("/"),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),b("Failed to create an account");case 14:y(!1);case 15:case"end":return n.stop()}}),n,null,[[3,11]])})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null,r.a.createElement(m.a.Body,null,r.a.createElement("h2",{className:"text-center mb-4"},"Sign Up"),E&&r.a.createElement(p.a,{variant:"danger"},E),r.a.createElement(d.a,{onSubmit:function(e){return P.apply(this,arguments)}},r.a.createElement(d.a.Group,{id:"email"},r.a.createElement(d.a.Label,null,"Email"),r.a.createElement(d.a.Control,{type:"email",ref:e,required:!0})),r.a.createElement(d.a.Group,{id:"password"},r.a.createElement(d.a.Label,null,"Password"),r.a.createElement(d.a.Control,{type:"password",ref:t,required:!0})),r.a.createElement(d.a.Group,{id:"password-confirm"},r.a.createElement(d.a.Label,null,"Password Confirmation"),r.a.createElement(d.a.Control,{type:"password",ref:a,required:!0})),r.a.createElement(f.a,{disabled:O,className:"w-100",type:"submit"},"Sign Up")))),r.a.createElement("div",{className:"w-100 text-center mt-2"},"Already have an account? ",r.a.createElement(w.b,{to:"/login"},"Log In")))}var x=a(164),P=(a(104),a(39)),C=a(2),S=a(43),N=a.n(S),L="http://localhost:4000/",k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L+"postmessages/";return{fetchAll:function(){return N.a.get(e)},fetchById:function(t){return N.a.get(e+t)},create:function(t){return N.a.post(e,t)},update:function(t,a){return N.a.put(e+t,a)},delete:function(t){return N.a.delete(e+t)}}},M="CREATE",I="UPDATE",R="DELETE",A="FETCH_ALL",F=a(158),U=a(125),B=a(155),D=a(159),T=a(160),G=a(53),_=a(156),q=a(161),W=a(6),z=a(29),H=a(165),V=a(17),J=function(e,t){var a=Object(n.useState)(e),r=Object(i.a)(a,2),c=r[0],l=r[1],s=Object(n.useState)({}),o=Object(i.a)(s,2),u=o[0],m=o[1];return{values:c,setValues:l,errors:u,setErrors:m,handleInputChange:function(e){var t=e.target,a=t.name,n=t.value;l(Object(z.a)({},c,Object(V.a)({},a,n)))},resetForm:function(){l(e),m({}),t(0)}}},K=a(26),Q=a.n(K),$=a(151),X={title:"",message:""},Y={createPostMessage:function(e,t){return function(a){k().create(e).then((function(e){a({type:M,payload:e.data}),t()})).catch((function(e){return console.log(e)}))}},updatePostMessage:function(e,t,a){return function(n){k().update(e,t).then((function(e){n({type:I,payload:e.data}),a()})).catch((function(e){return console.log(e)}))}}},Z=Object(P.b)((function(e){return{postMessageList:e.postMessage.list}}),Y)(Object(W.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1)}},form:{display:"flex",flexWrap:"wrap",justifyContent:"center"},postBtn:{width:"50%"}}}))((function(e){var t=e.classes,a=Object(C.a)(e,["classes"]);Object(n.useEffect)((function(){0!=a.currentId&&(s(Object(z.a)({},a.postMessageList.find((function(e){return e._id==a.currentId})))),u({}))}),[a.currentId]);var c=J(X,a.setCurrentId),l=c.values,s=c.setValues,o=c.errors,u=c.setErrors,i=c.handleInputChange,m=c.resetForm;return r.a.createElement("form",{autoComplete:"off",noValidate:!0,className:"".concat(t.root," ").concat(t.form),onSubmit:function(e){e.preventDefault();var t=function(){Q.a.raise({content:r.a.createElement(K.Cinnamon.Crisp,{title:"Post Box",content:"Submitted successfully",scheme:K.Cinnamon.Crisp.SCHEME_PURPLE,icon:r.a.createElement($.a,null)})}),m()};(function(){var e=Object(z.a)({},o);return e.title=l.title?"":"This field is required.",e.message=l.message?"":"This field is required.",u(Object(z.a)({},e)),Object.values(e).every((function(e){return""==e}))})()&&(0==a.currentId?a.createPostMessage(l,t):a.updatePostMessage(a.currentId,l,t))}},r.a.createElement(H.a,Object.assign({name:"title",variant:"outlined",label:"Title",fullWidth:!0,value:l.title,onChange:i},o.title&&{error:!0,helperText:o.title})),r.a.createElement(H.a,Object.assign({name:"message",variant:"outlined",label:"Message",fullWidth:!0,multiline:!0,rows:4,value:l.message,onChange:i},o.message&&{error:!0,helperText:o.message})),r.a.createElement(_.a,{variant:"contained",color:"primary",size:"large",type:"submit",className:t.postBtn},"Submit"))}))),ee=a(157),te={fetchAllPostMessages:function(){return function(e){k().fetchAll().then((function(t){e({type:A,payload:t.data})})).catch((function(e){return console.log(e)}))}},deletePostMessage:function(e,t){return function(a){k().delete(e).then((function(n){a({type:R,payload:e}),t()})).catch((function(e){return console.log(e)}))}}},ae=Object(P.b)((function(e){return{postMessageList:e.postMessage.list}}),te)(Object(W.a)((function(e){return{paper:{margin:e.spacing(3),padding:e.spacing(2)},smMargin:{margin:e.spacing(1)},actionDiv:{textAlign:"center"}}}))((function(e){var t=e.classes,a=Object(C.a)(e,["classes"]),c=Object(n.useState)(0),l=Object(i.a)(c,2),s=l[0],o=l[1];Object(n.useEffect)((function(){a.fetchAllPostMessages()}),[]);return r.a.createElement(F.a,{container:!0},r.a.createElement(F.a,{item:!0,xs:5},r.a.createElement(U.a,{className:t.paper},r.a.createElement(Z,{currentId:s,setCurrentId:o}))),r.a.createElement(F.a,{item:!0,xs:7},r.a.createElement(U.a,{className:t.paper},r.a.createElement(B.a,null,a.postMessageList.map((function(e,c){return r.a.createElement(n.Fragment,{key:c},r.a.createElement(D.a,null,r.a.createElement(T.a,null,r.a.createElement(G.a,{variant:"h5"},e.title),r.a.createElement("div",null,e.message),r.a.createElement("div",{className:t.actionDiv},r.a.createElement(_.a,{variant:"contained",color:"primary",size:"small",className:t.smMargin,onClick:function(){return o(e._id)}},"Edit"),r.a.createElement(_.a,{variant:"contained",color:"secondary",size:"small",className:t.smMargin,onClick:function(){return t=e._id,void(window.confirm("Are you sure to delete this record?")&&a.deletePostMessage(t,(function(){Q.a.raise({content:r.a.createElement(K.Cinnamon.Crisp,{title:"Post Box",content:"Deleted successfully",scheme:K.Cinnamon.Crisp.SCHEME_PURPLE,icon:r.a.createElement(ee.a,null)})})})));var t}},"Delete")))),r.a.createElement(q.a,{component:"li"}))}))))))}))),ne=a(33),re=a(79),ce=a(28),le={list:[]},se=Object(ne.c)({postMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(z.a)({},e,{list:Object(ce.a)(t.payload)});case M:return Object(z.a)({},e,{list:[].concat(Object(ce.a)(e.list),[t.payload])});case I:return Object(z.a)({},e,{list:e.list.map((function(e){return e._id==t.payload._id?t.payload:e}))});case R:return Object(z.a)({},e,{list:e.list.filter((function(e){return e._id!=t.payload}))});default:return e}}}),oe=Object(ne.e)(se,Object(ne.d)(Object(ne.a)(re.a))),ue=a(162),ie=a(163);var me=function(){return r.a.createElement(P.a,{store:oe},r.a.createElement(ue.a,{maxWidth:"lg"},r.a.createElement(ie.a,{position:"static",color:"inherit"},r.a.createElement(G.a,{variant:"h2",align:"center"},"Message Box")),r.a.createElement(ae,null),r.a.createElement(Q.a,{position:{vertical:K.POS_TOP,horizontal:K.POS_RIGHT}})))};function pe(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],l=v(),s=l.currentUser,d=l.logout,E=Object(j.g)();function b(){return(b=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(""),e.prev=1,e.next=4,d();case 4:E.push("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),c("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(me,null),r.a.createElement(m.a,null,r.a.createElement(m.a.Body,null,r.a.createElement("h2",{className:"text-center mb-4"},"Profile"),a&&r.a.createElement(p.a,{variant:"danger"},a),r.a.createElement("strong",null,"Email:")," ",s.email,r.a.createElement(w.b,{to:"/update-profile",className:"btn btn-primary w-100 mt-3"},"Update Profile"))),r.a.createElement("div",{className:"w-100 text-center mt-2"},r.a.createElement(f.a,{variant:"link",onClick:function(){return b.apply(this,arguments)}},"Log Out")))}function de(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=v().login,c=Object(n.useState)(""),l=Object(i.a)(c,2),s=l[0],E=l[1],b=Object(n.useState)(!1),g=Object(i.a)(b,2),h=g[0],O=g[1],y=Object(j.g)();function x(){return(x=Object(u.a)(o.a.mark((function n(r){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.prev=1,E(""),O(!0),n.next=6,a(e.current.value,t.current.value);case 6:y.push("/"),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),E("Failed to log in");case 12:O(!1);case 13:case"end":return n.stop()}}),n,null,[[1,9]])})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null,r.a.createElement(m.a.Body,null,r.a.createElement("h2",{className:"text-center mb-4"},"Log In"),s&&r.a.createElement(p.a,{variant:"danger"},s),r.a.createElement(d.a,{onSubmit:function(e){return x.apply(this,arguments)}},r.a.createElement(d.a.Group,{id:"email"},r.a.createElement(d.a.Label,null,"Email"),r.a.createElement(d.a.Control,{type:"email",ref:e,required:!0})),r.a.createElement(d.a.Group,{id:"password"},r.a.createElement(d.a.Label,null,"Password"),r.a.createElement(d.a.Control,{type:"password",ref:t,required:!0})),r.a.createElement(f.a,{disabled:h,className:"w-100",type:"submit"},"Log In")),r.a.createElement("div",{className:"w-100 text-center mt-3"},r.a.createElement(w.b,{to:"/forgot-password"},"Forgot Password?")))),r.a.createElement("div",{className:"w-100 text-center mt-2"},"Need an account? ",r.a.createElement(w.b,{to:"/signup"},"Sign Up")))}function fe(e){var t=e.component,a=Object(C.a)(e,["component"]),n=v().currentUser;return r.a.createElement(j.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(j.a,{to:"/login"})}}))}function Ee(){var e=Object(n.useRef)(),t=v().resetPassword,a=Object(n.useState)(""),c=Object(i.a)(a,2),l=c[0],s=c[1],E=Object(n.useState)(""),b=Object(i.a)(E,2),g=b[0],h=b[1],O=Object(n.useState)(!1),j=Object(i.a)(O,2),y=j[0],x=j[1];function P(){return(P=Object(u.a)(o.a.mark((function a(n){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),a.prev=1,h(""),s(""),x(!0),a.next=7,t(e.current.value);case 7:h("Check your inbox for further instructions"),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),s("Failed to reset password");case 13:x(!1);case 14:case"end":return a.stop()}}),a,null,[[1,10]])})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null,r.a.createElement(m.a.Body,null,r.a.createElement("h2",{className:"text-center mb-4"},"Password Reset"),l&&r.a.createElement(p.a,{variant:"danger"},l),g&&r.a.createElement(p.a,{variant:"success"},g),r.a.createElement(d.a,{onSubmit:function(e){return P.apply(this,arguments)}},r.a.createElement(d.a.Group,{id:"email"},r.a.createElement(d.a.Label,null,"Email"),r.a.createElement(d.a.Control,{type:"email",ref:e,required:!0})),r.a.createElement(f.a,{disabled:y,className:"w-100",type:"submit"},"Reset Password")),r.a.createElement("div",{className:"w-100 text-center mt-3"},r.a.createElement(w.b,{to:"/login"},"Login")))),r.a.createElement("div",{className:"w-100 text-center mt-2"},"Need an account? ",r.a.createElement(w.b,{to:"/signup"},"Sign Up")))}function be(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useRef)(),c=v(),l=c.currentUser,s=c.updatePassword,o=c.updateEmail,u=Object(n.useState)(""),E=Object(i.a)(u,2),b=E[0],g=E[1],h=Object(n.useState)(!1),O=Object(i.a)(h,2),y=O[0],x=O[1],P=Object(j.g)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null,r.a.createElement(m.a.Body,null,r.a.createElement("h2",{className:"text-center mb-4"},"Update Profile"),b&&r.a.createElement(p.a,{variant:"danger"},b),r.a.createElement(d.a,{onSubmit:function(n){if(n.preventDefault(),t.current.value!==a.current.value)return g("Passwords do not match");var r=[];x(!0),g(""),e.current.value!==l.email&&r.push(o(e.current.value)),t.current.value&&r.push(s(t.current.value)),Promise.all(r).then((function(){P.push("/")})).catch((function(){g("Failed to update account")})).finally((function(){x(!1)}))}},r.a.createElement(d.a.Group,{id:"email"},r.a.createElement(d.a.Label,null,"Email"),r.a.createElement(d.a.Control,{type:"email",ref:e,required:!0,defaultValue:l.email})),r.a.createElement(d.a.Group,{id:"password"},r.a.createElement(d.a.Label,null,"Password"),r.a.createElement(d.a.Control,{type:"password",ref:t,placeholder:"Leave blank to keep the same"})),r.a.createElement(d.a.Group,{id:"password-confirm"},r.a.createElement(d.a.Label,null,"Password Confirmation"),r.a.createElement(d.a.Control,{type:"password",ref:a,placeholder:"Leave blank to keep the same"})),r.a.createElement(f.a,{disabled:y,className:"w-100",type:"submit"},"Update")))),r.a.createElement("div",{className:"w-100 text-center mt-2"},r.a.createElement(w.b,{to:"/"},"Cancel")))}var ge=function(){return r.a.createElement(x.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"}},r.a.createElement("div",null,r.a.createElement(w.a,null,r.a.createElement(O,null,r.a.createElement(j.d,null,r.a.createElement(fe,{exact:!0,path:"/",component:pe}),r.a.createElement(fe,{path:"/update-profile",component:be}),r.a.createElement(j.b,{path:"/signup",component:y}),r.a.createElement(j.b,{s:!0,path:"/login",component:de}),r.a.createElement(j.b,{path:"/forgot-password",component:Ee}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(123);l.a.render(r.a.createElement(ge,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},90:function(e,t,a){e.exports=a(124)},95:function(e,t,a){}},[[90,1,2]]]);
//# sourceMappingURL=main.3b6a0824.chunk.js.map